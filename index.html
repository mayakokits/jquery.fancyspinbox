<!DOCTYPE html>
<html lang="de" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='//fonts.googleapis.com/css?family=Oleo+Script+Swash+Caps:700|Open+Sans|Droid+Sans+Mono' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="//normalize-css.googlecode.com/svn/trunk/normalize.css" />
		<link rel="stylesheet" href="styles.css" />
		<script src="modernizr.custom.js" type="text/javascript"></script>
		
		<title>Fancy Spinbox</title>
	</head>
	<body>
		<div id="page">
	    <div class="github-fork-ribbon-wrapper right">
	        <div class="github-fork-ribbon">
	            <a href="https://github.com/mayakokits/jquery.fancyspinbox">Fork me on GitHub</a>
	        </div>
	    </div>
			
			<header>
				<h1>Fancy Spinbox</h1>
				<p>A small jQuery plugin for spinbox-style select dropdowns</p>
			</header>
			
			<div id="spinbox-container">
				<select id="my-menu">
					<option value="apples" data-text="some <strong>really tasty</strong> apples">some really tasty apples</option>
					<option value="bananas">Bananas</option>
					<option value="chocolate">Chocolate</option>
				</select>
			</div>
			
			<noscript>
				<p style="text-align: center;">Without Javascript, the whole thing degrades to this.</p>
			</noscript>
			
		  <p id="spinbox-options-label">Try out some of the options:</p> 
		  <fieldset id="spinbox-options"> 
		    
				<input type="checkbox" class="chooseOptions" name="options" value="spinButtons" id="check1" checked />
				<label for="check1"><span><span></span></span><code>spinButtons</code></label>
				<br />
				<input type="checkbox" class="chooseOptions" name="options" value="dropdownButton" id="check2" />
				<label for="check2"><span><span></span></span><code>dropdownButton</code></label> 
				<br />
				<input type="checkbox" class="chooseOptions" name="options" value="dropdown" id="check3" checked />
				<label for="check3"><span><span></span></span><code>dropdown</code></label> 
				<br />
				<input type="checkbox" class="chooseOptions" name="options" value="cycle" id="check4" />
				<label for="check4"><span><span></span></span><code>cycle</code></label> 
		    
		  </fieldset> 
			
			<div id="readme"></div>
			
			<footer>
				<hr />
				<p>A gadget by <a href="http://mayakokits.com">Maya Kokits</a>. Download <a href="https://github.com/mayakokits/jquery.fancyspinbox/archive/master.zip">.zip</a> or <a href="https://github.com/mayakokits/jquery.fancyspinbox">fork it</a>.</p>
			</footer>
		
		</div>
		
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script type="text/javascript" src="jquery.fancyspinbox.js"></script>
		<script type="text/javascript">
			jQuery(function($){
				var $spinbox = $('#my-menu'),
					$checkBoxes = $('.chooseOptions');

				function getSelectedOptions(){
						var options = {};
						for(var i=0,j=$checkBoxes.length; i<j; i++){
							options[$checkBoxes[i].value] = $checkBoxes[i].checked;
						};
						return options;
					};
				
				$spinbox.fancyspinbox(getSelectedOptions());
				
				$checkBoxes.change(function(e){
					$('#spinbox-container').animate({
							opacity: 0							
						}, {
							duration: 200,
							complete: function(){
								// switch back to spinButtons if dropdownButton was active
								if (e.target.value == 'spinButtons') $('#check2')[0].checked = false;
								
								// get rid of the old fancyspinbox
								$spinbox.data('fancyspinbox').element.remove();
								$spinbox.removeData('fancyspinbox');
								
								// have a new one
								$spinbox.fancyspinbox(getSelectedOptions());
								// new fancyspinbox inherits display: none from the select element, so: 
								$spinbox.data('fancyspinbox').element.show();
								$('#spinbox-container').animate({opacity: 1}, {duration: 200});
								
								// the plugin has its logic to determine which features override others
								// check for the actual features and adjust the checkboxes:
								$('#check1')[0].checked = ($spinbox.data('fancyspinbox').element.has('button.spin-up').length) ? true : false;
								$('#check2')[0].checked = ($spinbox.data('fancyspinbox').element.has('button.toggle-dropdown').length) ? true : false;
								$('#check3')[0].checked = ($spinbox.data('fancyspinbox').element.has('.dropdown').length) ? true : false;
							}
						});
					});
				
				// get the readme				
				$.ajax({
						url: 'https://api.github.com/repos/mayakokits/jquery.fancyspinbox/readme',
						crossDomain: true,					
						headers: {
							'Accept': 'application/vnd.github.v3.html'
						}
					})
					.done(function(html){
							var $html = $(html);
							
							// remove paragraph with link to the demo page
							$html.find('a[href="http://mayakokits.github.io/jquery.fancyspinbox"]').parent('p').remove();
							
							$('#readme').append($html);
						});
				
			});
		</script>
	</body>
</html>